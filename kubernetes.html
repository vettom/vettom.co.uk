<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="stylesheets/style.css">
  <link rel="stylesheet" href="stylesheets/style1.css">
  <link rel="icon" href="images/favicon.ico" type="image/png" sizes="32x32">
</head>


<body>

<div class="header">
  <img src="images/Robin-100px.png" style="float: left";"height=100px";"width:80px;">
  <h1>Vettom</h1>
</div>
<!-- Start Top Navigation -->

<div class="topnav">
  <a href="index.html">Home</a>
  <a href="aws.html">AWS</a>
  <a href="azure.html">Azure</a>
  <a href="python.html">Python</a>
  <a href="linux.html">Linux</a>
  <a href="web.html">Web</a>
  <a href="kubernetes.html">K8</a>
  <a href="aem.html">AEM</a>
  <a href="misc.html">Misc</a>
  <a href="dennyvettom.html" style="float:right">About Me</a>
</div>

<!-- End Top Navigation -->

<div class="row">
  <div class="leftcolumn">
    <div class="card">
       <div class="fakeimg" style="height:80px;"> <h3>To be where you have never been before, you have to do what you have never done before! </h3></div> 
    </div>
    <div class="card">
     <a name="Health_Checks" <h1>Health Checks</h1> </a>
        
        <p> 
    </div>
    <div class="card">
      <a name="ResoureControl" ><h1>Resource Control</h1> </a>
        
        <p> Requests are limits are K8 way of controling resources like CPU and Memory. </p>
        <p> <B>CPU : </B> Resources are measured in millicores. If containers requires 2 full cores to run then the value is 2000m. If none of the nodes in the cluster have enough cores, your pod will not be scheduled. Unless application is multicore, recommended to keep single core and create more deployments  </p>
        <p><B><i> 1 CPU Core = 1000 MilliCore</i></B></p>
        <p> CPU is considered compressible object. If app starts hitting the limits, k8 will start throttling the container and performance of container will be affected but not terminated or evicted </p> 
    <p> <b> Memory : </b> Memory is measures in Mebibytes (Mi) and is not compressible resource. If container goes past memory limit, it will be terminated </p>

    <h2>Names Space Resource Control </h2>
    <p> It is possible for badly configured containers to take up more resource than allowed and cause problems.  K8 provides 2 options to solve this problem. Resource quota can be allocated to Namespaces. For eg, Production can get unlimited, while dev resources are throtled.</p>
    <li>Resource Quota (Applicaed at namespace level) </li>
    <li>LimitRange (Applied at container level with in Namespace) </li>

    <h2> Resource Quota (Namespace Level) </h2>

    <pre data-lang='python' class='prettyprint'>
    apiVersion: v1
    kind : resourceQuota
    metadata:
        name: demo
    spec:
        hard:
          requests.cpu: 500m
          requests.memory: 100Mib
          limits.cpu: 700m
      limits.meory: 500Mib
    </pre>
    <p><b>Requests.cpu :</b> Total CPU that can be allocated with in the namespace. As long as total CPU requirement does not exceed, there can be any number of containers with in the limit. </p>
    <p><b> Limits.cpu : </b>  Is the maximum CPU can be consumed by Namespace. </p>

    <h2> LimitRange (Container  Level) </h2>

    <pre data-lang='python' class='prettyprint'>
      apiVersion: v1
      kind: LimitRange
      metadata:
        name:demo
      spec:
        limits:
      - default:
          cpu: 600m
          memory: 100Mib
        defaultRequest:
          cpu: 100Mib
          memory: 50Mib
        max:
          cpu: 1000m
          memory: 200Mib
        min:
          cpu: 10m
          memory: 10Mib
        type: Container

    </pre>

    <p><b> default section :</b> Defines default maximum for a container if not specified </p>
      <p><b> defaultRequest :</b> Defines default minimum resources if not specifies for container </p>
      <p><b> max : </b> Maximum resource a container can be configured to run. This cannot be lower than 'default' </p>
      <p><b> min : </b> Minimum resources a container can be allocated. It cannot be lower than'defaultRequest'</p>
    
    <p><b> If max and min set without 'defaults' max becomes 'default' and min becomes 'defaultRequest' </b></p>

    <h2> Over committed resources state </h2>
    <p> If not enough resources available to provisione, pods go in to "Pending" state. additional capacity must be added to resolve the issue. If existing resurces are overcommited CPU and memory are handled different
      <li> CPU : K8 will throtle the pods to provide requested amount of CPU</li>
      <li> Mem : Memory cannot be complressed, s k8 will have to kill some pods to free up resources. K8 looks for pods that using more resources than requested and are first candidate for termination. Or look for contaners gone above request but under the limits, K8 will rank pods by priority and terminates one with lowest priority. If all pods have same priority, K8 will terminate pod that had gone most above the request. </li>
    </div>
   <div class="card">
      <a name="External_Services" ><h1>Connectig to External services</h1> </a>
  </div>

 <!-- Links at the side of page -->
  </div>
  <div class="rightcolumn">
    <div class="card">
      <h2>Links</h2>
      <li><a class="nostyle" href="#ResoureControl"> Resource Control </a></li>
      <li><a class="nostyle" href="#Health_Checks"> Health check </a></li>
      <li><a class="nostyle" href="#External_services"> External Services </a></li>
      <li><a class="nostyle" href="#ResoureControl"> Resource Control </a></li>
     <!-- <div class="fakeimg" style="height:100px;">Image</div> -->
      <p>Links for sub page categories.</p>
    </div>

  </div>

 
</div>

<div class="footer">
  <p> <a class="nostyle" href="dennyvettom.html">Denny Vettom </a>| <a class="nostyle"  href="https://github.com/vettom"> Vettom Git </a></p>
</div>

</body>